buildscript {
    ext {
        set("projectVersion", "0.0.1-SNAPSHOT")
        set("springBootVersion", "3.3.0")
        set("springDependencyVersion", "1.1.5")
        set("frontendDir", "$projectDir/frontend")
    }
    repositories {
        mavenCentral()
    }
}

allprojects {
    group = 'com.example'
    version = projectVersion

    repositories {
        mavenCentral()
    }
}

subprojects {
    apply plugin: 'java'

    dependencies {
        testImplementation "org.springframework.boot:spring-boot-starter-test:$springBootVersion"
    }

    test {
        useJUnitPlatform()
    }
}

task buildFrontend(type: Exec) {
    workingDir "$frontendDir"
    commandLine 'npm', 'install'
    commandLine 'npm', 'run', 'build'
}